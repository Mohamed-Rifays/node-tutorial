<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>weather forecast</title>
</head>
<body>

  {{>header}}
   Name: <input class="user-info" type="text">
    Location : <input class="location" type="text">
    <button onclick="renderweather()">Get Forecast</button>
    
    <p class="info-user"></p>
    <p class="display-result"></p>
    <script>

        
        async function renderweather() {
            
            const loc = document.querySelector('.location').value;
            const user = document.querySelector('.user-info').value;

            document.querySelector('.display-result').innerHTML = 'Please Wait , Your request is processing'
            try{

            
        const response = await fetch(`http://localhost:3000/weather?address=${loc}`);

        const result = await response.json();

        if(result.error === 'check the url' || 
            result.error === 'something went wrong' || 
            result.error === 'usage_limit_reached'){

                document.querySelector('.display-result').innerHTML = `there is an error of :${result.error}`

            }
            }
            catch(error)
            {
             document.querySelector('.display-result').innerHTML = `there is an error of :${error.message}`
              
            }

        

            document.querySelector('.info-user').innerHTML = `Hey ${user} Here's your forecast info`

            
        
               document.querySelector('.display-result').innerHTML = `the temperature is : ${result.current.temperature} but it feels like : ${result.current.feelslike}`
            }
            
        
    

        
    </script>
    {{>footer}}
</body>
</html>